---
title: 《方舟:生存进化》本地服务器内网穿透及端口转发
date: ''
modified: ''
category: 游戏相关
tags:
- ark
thumb: https://blog.cdn.thinkmoon.cn/blog/typecho/2019-10-14T08:16:02.png
---

# 写在前面

## 1. 游戏/服务器简介
略

![2019-10-14T08:16:02.png][1]

## 2. 为什么要这么做？
众所周知，游戏服务器一般来说非常吃性能，对内存和CPU要求颇高。如（方舟：生存进化):

![2019-09-30T02:16:40.png][2]

以上是游戏官网原话。但其实我亲测过一下

- 腾讯云（1核2G）能带两个用户，但是很卡会人物回退（不装mod）。
- 华为云（2核4G）能装mod，并且不卡，就是启动会很慢。

以上都是在最久的windows系统服务器下测试的，应该和Windows xp同等级的服务器系统，再高就很难启动了，时不时报内存不够。所以，在我的理智思考下，我决定用家用电脑做服务器。

但是在实际搭建过程中，我遇到了一个问题，那就是移动宽带公网IP无解啊！一般没有公网ip的时候，我们第一时间想到的肯定是就是内网穿透了，而且一般游戏服务器使用的是UDP协议，也就是说我们需要搭建一个支持udp协议的内网穿透平台，我第一时间想到了[frp](https://github.com/fatedier/frp)。

## 3. 所需设备
- 具有公网IP的服务器一台（不要问我为什么有公网服务器还用内网穿透的问题，那只能说明你没看懂上面内容）
- 家用能联网的服务器一台（两台服务器的地理位置尽可能近）

实验环境，我使用的是阿里云的云翼计划（1核2G，5M带宽）

## 4. 大致思路
就是在本地搭一台服务器，然后做个内网穿透，这样搜索公网IP的那个服务器就可以连接到你本地服务器了。
转发udp: 7777，7778，27015。tcp：27016

> 注意事项：内网穿透版的在搜索中搜不到，但是可以直接在steam->视图->添加服务器
![2020-03-06T03:36:14.png][3]


  [1]: https://blog.cdn.thinkmoon.cn/blog/typecho/2019-10-14T08:16:02.png
  [2]: https://blog.cdn.thinkmoon.cn/blog/typecho/2019-09-30T02:16:40.png
  [3]: http://blog.cdn.thinkmoon.cn/blog/typecho/2020-03-06T03:36:14.png