<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="{{ if .IsHome }}{{ .Site.Params.description }}{{ else }}{{ .Description }}{{ end }}">
    <meta name="keywords" content="{{ if .Params.tags }}{{ delimit .Params.tags ", " }}{{ else }}{{ .Site.Params.keywords }}{{ end }}">

    <!-- Open Graph -->
    <meta property="og:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}">
    <meta property="og:description" content="{{ if .IsHome }}{{ .Site.Params.description }}{{ else }}{{ .Description }}{{ end }}">
    <meta property="og:type" content="{{ if .IsHome }}website{{ else }}article{{ end }}">
    <meta property="og:url" content="{{ .RelPermalink }}">
    {{ if .Params.featured_image }}
    <meta property="og:image" content="{{ .Params.featured_image }}">
    {{ end }}

    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/github-markdown.css">
    {{ range .Site.Params.custom_css }}
    <link rel="stylesheet" href="{{ . | absURL }}">
    {{ end }}
</head>
<body>
    <!-- Navigation -->
    {{ block "nav" . }}
    <nav class="top-menu">
        <div class="container">
            <div class="left">
                <a href="/">æŒ‡å°–é­”æ³•å±‹</a>
            </div>
            <ul class="menu">
                <li class="{{ if or (strings.HasPrefix .RelPermalink "/page") (eq .Section "post") }}active{{ end }}">
                    <a href="/page/">æ–‡ç« </a>
                </li>
                <li class="{{ if strings.HasPrefix .RelPermalink "/categories" }}active{{ end }}">
                    <a href="/categories/">åˆ†ç±»</a>
                </li>
                <li class="{{ if strings.HasPrefix .RelPermalink "/tags" }}active{{ end }}">
                    <a href="/tags/">æ ‡ç­¾</a>
                </li>
                <li class="{{ if strings.HasPrefix .RelPermalink "/search" }}active{{ end }}">
                    <a href="/search/" title="æœç´¢" class="search-icon">ğŸ”</a>
                </li>
            </ul>
        </div>
    </nav>
    {{ end }}

    <!-- Main Content -->
    <main>
        {{ block "main" . }}{{ end }}
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <span>Copyright Â© 2017-{{ now.Format "2006" }} æŒ‡å°–é­”æ³•å±‹. All rights reserved</span>
            <span>POWERED BY thinkBlog Â· v{{ .Site.Params.version | default "1.0.0" }}</span>
            <span>ç½‘ç«™æŒç»­æ­å»ºä¸­ï¼Œæ„Ÿè°¢å…³æ³¨</span>
            <span id="site-timer">æœ¬ç«™å·²é¡½å¼ºè¿è¡Œï¼šåŠ è½½ä¸­...</span>
            <div class="beian">
                <a href="http://beian.miit.gov.cn/" target="_blank">ç²¤ICPå¤‡17055617å·</a>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="/js/thinkblog.js"></script>
        <!-- Code fold styles & script: è‡ªåŠ¨æŠ˜å è¶…è¿‡100è¡Œçš„ä»£ç å— (é‡‡ç”¨æŒ‡å°–é­”æ³•å±‹è®¾è®¡è§„èŒƒæ ·å¼) -->
        <style>
        :root{--primary:#007acc;--primary-dark:#0056b3;--card-bg:rgba(255,255,255,0.96)}
        .code-wrap{position:relative;margin:1rem 0;border-radius:12px;background:var(--card-bg);box-shadow:0 1px 6px rgba(16,24,32,0.06);overflow:hidden;border:1px solid rgba(0,0,0,0.04)}
        .code-wrap .preview{max-height:14em;overflow:hidden;padding:0}
        .code-wrap pre{margin:0;padding:1rem;overflow:auto;background:transparent}
        .code-wrap.expanded .preview{max-height:none}
        /* ä½¿ç”¨ä¸»é¢˜ä¸€è‡´çš„è½®å»“é£æ ¼ï¼šé€æ˜åº• + ä¸»è‰²è¾¹æ¡†/æ–‡å­— */
        .code-collapse-btn{position:absolute;right:0.6rem;top:0.6rem;background:transparent;color:var(--primary);border:1px solid rgba(0,122,204,0.16);padding:6px 10px;border-radius:999px;font-size:0.88rem;cursor:pointer;transition:background 0.18s ease,transform 0.12s,color 0.12s,box-shadow 0.12s;display:inline-flex;align-items:center}
        .code-collapse-btn:hover{background:rgba(0,122,204,0.06);color:var(--primary-dark);transform:translateY(-1px);box-shadow:0 6px 12px rgba(0,122,204,0.06)}
        .code-collapse-btn .icon{display:inline-block;margin-right:0.5rem;line-height:1}
        .code-collapse-overlay{position:absolute;left:0;right:0;bottom:0;height:3rem;background:linear-gradient(180deg, rgba(255,255,255,0) 0%, rgba(248,249,250,0.95) 70%);pointer-events:none}
        </style>

        <script>
        document.addEventListener('DOMContentLoaded', function(){
            const codeBlocks = document.querySelectorAll('.markdown-body pre');
            codeBlocks.forEach(function(pre){
                const code = pre.querySelector('code');
                if(!code) return;
                const text = code.textContent || '';
                const lineCount = text.split('\n').length;
                if(lineCount <= 100) return;

                const wrap = document.createElement('div');
                wrap.className = 'code-wrap collapsed';

                const preview = document.createElement('div');
                preview.className = 'preview';
                preview.appendChild(pre.cloneNode(true));

                const btn = document.createElement('button');
                btn.type = 'button';
                btn.className = 'code-collapse-btn';
                // ä½¿ç”¨ä¸»é¢˜ä¸­ä¸€è‡´çš„ Emoji å›¾æ ‡é£æ ¼ï¼ˆæŠ˜å ï¼šğŸ”½ï¼Œå±•å¼€ï¼šğŸ”¼ï¼‰
                btn.innerHTML = '<span class="icon">ğŸ”½</span> å±•å¼€ï¼ˆå…± ' + lineCount + ' è¡Œï¼‰';

                const overlay = document.createElement('div');
                overlay.className = 'code-collapse-overlay';

                btn.addEventListener('click', function(){
                    const isCollapsed = wrap.classList.contains('collapsed');
                    if(isCollapsed){
                        wrap.classList.remove('collapsed');
                        wrap.classList.add('expanded');
                        btn.innerHTML = '<span class="icon">ğŸ”¼</span> æ”¶èµ·';
                        wrap.replaceChild(pre, preview);
                    } else {
                        wrap.classList.remove('expanded');
                        wrap.classList.add('collapsed');
                        btn.innerHTML = '<span class="icon">ğŸ”½</span> å±•å¼€ï¼ˆå…± ' + lineCount + ' è¡Œï¼‰';
                        wrap.replaceChild(preview, pre);
                    }
                });

                pre.parentNode.replaceChild(wrap, pre);
                wrap.appendChild(preview);
                wrap.appendChild(overlay);
                wrap.appendChild(btn);
            });
        });
        </script>
</body>
</html>
