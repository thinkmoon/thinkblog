<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Vscode无缝连接docker支持与主机文件同步 | 指尖魔法屋</title>

    
    <meta name="description" content="">
    <meta name="keywords" content="tensorflow, vscode, docker">

    
    <meta property="og:title" content="Vscode无缝连接docker支持与主机文件同步">
    <meta property="og:description" content="">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://example.org/post/692_vscode%E6%97%A0%E7%BC%9D%E8%BF%9E%E6%8E%A5docker%E6%94%AF%E6%8C%81%E4%B8%8E%E4%B8%BB%E6%9C%BA%E6%96%87%E4%BB%B6%E5%90%8C%E6%AD%A5/">
    
    <meta property="og:image" content="https://blog.cdn.thinkmoon.cn/blog/typecho/2019-12-21T01:33:55.png">
    

    
    <link rel="icon" href="https://example.org/favicon.ico">

    
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/github-markdown.css">
    <link rel="stylesheet" href="/css/custom.css">
</head>
<body>
    
    
    <nav class="top-menu">
        <div class="container">
            <div class="left">
                <a href="https://example.org/">指尖魔法屋</a>
            </div>
            <ul class="menu">
                <li class="">
                    <a href="https://example.org/">首页</a>
                </li>
                <li class="">
                    <a href="/categories/">分类</a>
                </li>
                <li class="">
                    <a href="/tags/">标签</a>
                </li>
            </ul>
            <div class="right">
                <a href="/admin" class="admin-link">
                    <span>登录</span>
                </a>
            </div>
        </div>
    </nav>
    

    
    <main>
        
<div class="article-content">
    <div class="markdown-body">
        <h2 id="为什么需要">为什么需要？</h2>
<p>我们在上一篇<a href="https://www.thinkmoon.cn/20191213/cid=638.html">Ubuntu深度学习的相关配置</a>中最后讲到，将工作目录下的文件装载到了容器之下，这样我们在主机中编写一个文件，如<code>tf.py</code>。在容器中执行，需要输入以下命令。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">docker <span class="nb">exec</span> tf python <span class="s1">&#39;./tf.py&#39;</span> 
</span></span></code></pre></div><p>这样每改一下文件，想要看效果的话，就需要输入以上命令。而且，还不方便调试。然后，我就在想能不能做到像我平常写代码那样，在VScode中，点一下就运行，而且可以调试呢？于是便有了本文。</p>
<h2 id="准备工作">准备工作</h2>
<ul>
<li>安装好VScode并且保证互联网连接正常。然后将工作目录装载到容器的<code>/root/Project</code>目录下，不然<code>/tmp</code>的文件实在是太乱七八糟了。</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">docker run --gpus all -itd --name tf --rm -v ~/Project:/root/Project  tensorflow/tensorflow:latest-gpu-py3
</span></span></code></pre></div><h2 id="操作流程">操作流程</h2>
<p>首先安装两个插件<code>docker</code>和<code>Remote Development</code></p>
<p><img src="https://blog.cdn.thinkmoon.cn/blog/typecho/2019-12-21T01:29:10.png" alt="VScode的docker插件"></p>
<p>上图中可以看到tensorflow的容器已经处于运行中了，然后再打开<code>Remote Development</code></p>
<p><img src="https://blog.cdn.thinkmoon.cn/blog/typecho/2019-12-21T01:31:51.png" alt="Remote Development"></p>
<p>显示有一个容器待连接，然后选择它，打开容器中的<code>Project</code>文件夹</p>
<p><img src="https://blog.cdn.thinkmoon.cn/blog/typecho/2019-12-21T01:33:55.png" alt="VScode in Container"></p>
<p>然后安装Python插件和调试工具，修改tf.py文件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">tensorflow</span> <span class="k">as</span> <span class="nn">tf</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;hello tensorflow&#34;</span><span class="p">)</span>
</span></span></code></pre></div><p>点击右边的运行图标，成功输出。</p>
<p><img src="https://blog.cdn.thinkmoon.cn/blog/typecho/2019-12-21T01:55:11.png" alt="run tensorflow"></p>
<p>打开主机文件</p>
<p><img src="https://blog.cdn.thinkmoon.cn/blog/typecho/2019-12-21T01:55:50.png" alt="docker主机文件同步"></p>
<p>发现修改也已经同步，Over，现在可以愉快的写代码了。</p>

    </div>

    
    <ins class="adsbygoogle"
         style="display:block; text-align:center;width: 100%"
         data-ad-client="ca-pub-3208634444966567"
         data-ad-format="fluid"
         data-ad-layout="in-article"
         data-ad-slot="2621880404">
    </ins>
</div>

    </main>

    
    <footer class="footer">
        <div class="container">
            <span>Copyright © 2017-2025 指尖魔法屋. All rights reserved</span>
            <span>POWERED BY thinkBlog · v1.0.0</span>
            <span>网站持续搭建中，感谢关注</span>
            <div class="beian">
                <a href="http://beian.miit.gov.cn/" target="_blank">粤ICP备17055617号</a>
            </div>
        </div>
    </footer>

    
    <script src="/js/thinkblog.js"></script>
</body>
</html>
