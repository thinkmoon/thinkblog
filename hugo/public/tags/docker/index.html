<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Docker | 指尖魔法屋</title>

    
    <meta name="description" content="">
    <meta name="keywords" content="">

    
    <meta property="og:title" content="Docker">
    <meta property="og:description" content="">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://example.org/tags/docker/">
    

    
    <link rel="icon" href="https://example.org/favicon.ico">

    
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/github-markdown.css">
    <link rel="stylesheet" href="/css/custom.css">
</head>
<body>
    
    
    <nav class="top-menu">
        <div class="container">
            <div class="left">
                <a href="https://example.org/">指尖魔法屋</a>
            </div>
            <ul class="menu">
                <li class="">
                    <a href="https://example.org/">首页</a>
                </li>
                <li class="">
                    <a href="/categories/">分类</a>
                </li>
                <li class="active">
                    <a href="/tags/">标签</a>
                </li>
            </ul>
            <div class="right">
                <a href="/admin" class="admin-link">
                    <span>登录</span>
                </a>
            </div>
        </div>
    </nav>
    

    
    <main>
        
<div class="page-container">
    <div class="container">
        <div class="page-header">
            <h1>Docker</h1>
            
        </div>

        <div class="blog-posts">
            
            <article class="content-box">
                

                <div class="posts-default-box">
                    <div class="posts-default-title">
                        
                        <div class="post-entry-categories">
                            
                            <a href="/tags/docker" class="post-tag">docker</a>
                            
                        </div>
                        

                        <a href="/post/984_%E6%AD%A6%E6%9E%97%E7%A7%98%E7%B1%8D/" class="post-title">
                            武林秘籍--docker篇
                        </a>
                    </div>

                    <div class="posts-default-content">
                        <div class="posts-text">
                            
                                记录一些常用的docker操作
                            
                        </div>

                        <div class="posts-default-info">
                            <div class="left">
                                <div class="post-author">
                                    <img src="https://blog.cdn.thinkmoon.cn/%E5%81%B7%E6%98%9F%E4%B9%9D%E6%9C%88%E5%A4%A9%E5%A4%B4%E5%83%8F.jpeg"
                                         alt="醉月思" width="16" height="16" style="border-radius:50%">
                                    <a href="https://www.thinkmoon.cn" target="_blank">醉月思</a>
                                </div>

                                <div class="ico-warp">
                                    <span class="icon">📁</span>
                                    <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">
                                        学习笔记
                                    </a>
                                </div>

                                <div class="ico-warp">
                                    <span class="icon">📅</span>
                                    <span>2025-03-03</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </article>
            
            <article class="content-box">
                
                <div class="posts-default-img">
                    <a href="/post/703_docker%E5%AE%B9%E5%99%A8%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BF%AE%E6%94%B9%E5%B9%B6%E9%87%8D%E6%96%B0%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F/" title="docker容器的自定义修改并重新构建镜像">
                        <div class="overlay"></div>
                        <img src="https://blog.cdn.thinkmoon.cn/blog/typecho/2020-01-02T08:04:43.png" alt="docker容器的自定义修改并重新构建镜像" loading="lazy">
                    </a>
                </div>
                

                <div class="posts-default-box">
                    <div class="posts-default-title">
                        
                        <div class="post-entry-categories">
                            
                            <a href="/tags/vscode" class="post-tag">vscode</a>
                            
                            <a href="/tags/docker" class="post-tag">docker</a>
                            
                        </div>
                        

                        <a href="/post/703_docker%E5%AE%B9%E5%99%A8%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BF%AE%E6%94%B9%E5%B9%B6%E9%87%8D%E6%96%B0%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F/" class="post-title">
                            docker容器的自定义修改并重新构建镜像
                        </a>
                    </div>

                    <div class="posts-default-content">
                        <div class="posts-text">
                            
                                前言 在上篇文章中，我们已经实现了VS code的无缝连接docker，却依旧存在着一些问题。比如它需要安装pylint方便调试，但是每次stop 容器之后，重新启动又需要重新安装，不可谓不麻烦。而且我发现它也需要重新安装VS code server,这是一个严重影响生产力的过程。所以目前的需求就变了如何作一些自定义的修改，并让这些修改永久性的保存。那答案当然是自定义的构建镜像啦，它可以让我们在构建的实践使用容器的过程中，将所做的更新持续化保存到自定义镜像。
自定义修改 在这里，我手动做了两个修改，一个是安装pylint，一个是更新pip。
提交更改 docker commit -m=&#34;install pylint&#34; -a=&#34;chauncey&#34; tf chauncey/tf 如上命令，将所有对容器的操作都保存至自定义镜像chauncey/tf 中。
测试效果 停止当前容器 docker stop tf 使用自定义镜像创建容器 docker run --gpus all -itd --name tf --rm -v ~/Project:/root/Project chauncey/tf 使用VS code远程连接，观察pip版本和pylint的安装情况。 如上图，我们发现pip已经是最新的版本。而且细心小伙伴会发现，连接容器时以及没有了install Dev container的提示了，这说明我们的VS code也已经预设安装进了镜像。
                            
                        </div>

                        <div class="posts-default-info">
                            <div class="left">
                                <div class="post-author">
                                    <img src="https://blog.cdn.thinkmoon.cn/%E5%81%B7%E6%98%9F%E4%B9%9D%E6%9C%88%E5%A4%A9%E5%A4%B4%E5%83%8F.jpeg"
                                         alt="醉月思" width="16" height="16" style="border-radius:50%">
                                    <a href="https://www.thinkmoon.cn" target="_blank">醉月思</a>
                                </div>

                                <div class="ico-warp">
                                    <span class="icon">📁</span>
                                    <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">
                                        学习笔记
                                    </a>
                                </div>

                                <div class="ico-warp">
                                    <span class="icon">📅</span>
                                    <span>2020-01-02</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </article>
            
            <article class="content-box">
                
                <div class="posts-default-img">
                    <a href="/post/692_vscode%E6%97%A0%E7%BC%9D%E8%BF%9E%E6%8E%A5docker%E6%94%AF%E6%8C%81%E4%B8%8E%E4%B8%BB%E6%9C%BA%E6%96%87%E4%BB%B6%E5%90%8C%E6%AD%A5/" title="Vscode无缝连接docker支持与主机文件同步">
                        <div class="overlay"></div>
                        <img src="https://blog.cdn.thinkmoon.cn/blog/typecho/2019-12-21T01:33:55.png" alt="Vscode无缝连接docker支持与主机文件同步" loading="lazy">
                    </a>
                </div>
                

                <div class="posts-default-box">
                    <div class="posts-default-title">
                        
                        <div class="post-entry-categories">
                            
                            <a href="/tags/tensorflow" class="post-tag">tensorflow</a>
                            
                            <a href="/tags/vscode" class="post-tag">vscode</a>
                            
                            <a href="/tags/docker" class="post-tag">docker</a>
                            
                        </div>
                        

                        <a href="/post/692_vscode%E6%97%A0%E7%BC%9D%E8%BF%9E%E6%8E%A5docker%E6%94%AF%E6%8C%81%E4%B8%8E%E4%B8%BB%E6%9C%BA%E6%96%87%E4%BB%B6%E5%90%8C%E6%AD%A5/" class="post-title">
                            Vscode无缝连接docker支持与主机文件同步
                        </a>
                    </div>

                    <div class="posts-default-content">
                        <div class="posts-text">
                            
                                为什么需要？ 我们在上一篇Ubuntu深度学习的相关配置中最后讲到，将工作目录下的文件装载到了容器之下，这样我们在主机中编写一个文件，如tf.py。在容器中执行，需要输入以下命令。
docker exec tf python &#39;./tf.py&#39; 这样每改一下文件，想要看效果的话，就需要输入以上命令。而且，还不方便调试。然后，我就在想能不能做到像我平常写代码那样，在VScode中，点一下就运行，而且可以调试呢？于是便有了本文。
准备工作 安装好VScode并且保证互联网连接正常。然后将工作目录装载到容器的/root/Project目录下，不然/tmp的文件实在是太乱七八糟了。 docker run --gpus all -itd --name tf --rm -v ~/Project:/root/Project tensorflow/tensorflow:latest-gpu-py3 操作流程 首先安装两个插件docker和Remote Development
上图中可以看到tensorflow的容器已经处于运行中了，然后再打开Remote Development
显示有一个容器待连接，然后选择它，打开容器中的Project文件夹
然后安装Python插件和调试工具，修改tf.py文件
import tensorflow as tf print(&#34;hello tensorflow&#34;) 点击右边的运行图标，成功输出。
打开主机文件
发现修改也已经同步，Over，现在可以愉快的写代码了。
                            
                        </div>

                        <div class="posts-default-info">
                            <div class="left">
                                <div class="post-author">
                                    <img src="https://blog.cdn.thinkmoon.cn/%E5%81%B7%E6%98%9F%E4%B9%9D%E6%9C%88%E5%A4%A9%E5%A4%B4%E5%83%8F.jpeg"
                                         alt="醉月思" width="16" height="16" style="border-radius:50%">
                                    <a href="https://www.thinkmoon.cn" target="_blank">醉月思</a>
                                </div>

                                <div class="ico-warp">
                                    <span class="icon">📁</span>
                                    <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">
                                        学习笔记
                                    </a>
                                </div>

                                <div class="ico-warp">
                                    <span class="icon">📅</span>
                                    <span>2020-01-02</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </article>
            
            <article class="content-box">
                
                <div class="posts-default-img">
                    <a href="/post/674_ubuntu%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E4%BA%91%E5%8A%A0%E9%80%9Fdocker-pull/" title="Ubuntu使用阿里云加速docker pull">
                        <div class="overlay"></div>
                        <img src="https://blog.cdn.thinkmoon.cn/blog/typecho/2019-12-19T09:13:04.png" alt="Ubuntu使用阿里云加速docker pull" loading="lazy">
                    </a>
                </div>
                

                <div class="posts-default-box">
                    <div class="posts-default-title">
                        
                        <div class="post-entry-categories">
                            
                            <a href="/tags/docker" class="post-tag">docker</a>
                            
                        </div>
                        

                        <a href="/post/674_ubuntu%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E4%BA%91%E5%8A%A0%E9%80%9Fdocker-pull/" class="post-title">
                            Ubuntu使用阿里云加速docker pull
                        </a>
                    </div>

                    <div class="posts-default-content">
                        <div class="posts-text">
                            
                                使用 Docker 时需要首先下载一个官方镜像，例如 mysql、wordpress。然而由于网络原因，下载一个 Docker 官方镜像可能会需要很长的时间，甚至下载失败。为此，阿里云容器镜像服务提供了官方的镜像站点，从而加速官方镜像的下载。
登陆阿里云容器镜像服务 由上图可以看到，阿里给我们分配的专享加速域名。
配置docker源 针对Docker客户端版本大于 1.10.0 的用户
可以通过修改daemon配置文件/etc/docker/daemon.json来使用加速器
不过默认没有这个文件的，所以我们需要新建一个
新建daemon.json sudo mkdir -p /etc/docker sudo touch /etc/docker/daemon.json 设置源地址 { &#34;registry-mirrors&#34;: [&#34;&lt;your accelerate address&gt;&#34;] } 重启生效 sudo systemctl daemon-reload sudo systemctl restart docker 大功吿成！！
                            
                        </div>

                        <div class="posts-default-info">
                            <div class="left">
                                <div class="post-author">
                                    <img src="https://blog.cdn.thinkmoon.cn/%E5%81%B7%E6%98%9F%E4%B9%9D%E6%9C%88%E5%A4%A9%E5%A4%B4%E5%83%8F.jpeg"
                                         alt="醉月思" width="16" height="16" style="border-radius:50%">
                                    <a href="https://www.thinkmoon.cn" target="_blank">醉月思</a>
                                </div>

                                <div class="ico-warp">
                                    <span class="icon">📁</span>
                                    <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">
                                        学习笔记
                                    </a>
                                </div>

                                <div class="ico-warp">
                                    <span class="icon">📅</span>
                                    <span>2019-12-19</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </article>
            
        </div>

        
        <div class="pagination-container">
            

            
            <a href="/tags/docker/" class="pagination-link ">1</a>
            

            
        </div>
        
    </div>
</div>

    </main>

    
    <footer class="footer">
        <div class="container">
            <span>Copyright © 2017-2025 指尖魔法屋. All rights reserved</span>
            <span>POWERED BY thinkBlog · v1.0.0</span>
            <span>网站持续搭建中，感谢关注</span>
            <div class="beian">
                <a href="http://beian.miit.gov.cn/" target="_blank">粤ICP备17055617号</a>
            </div>
        </div>
    </footer>

    
    <script src="/js/thinkblog.js"></script>
</body>
</html>
