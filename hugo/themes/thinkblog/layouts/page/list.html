{{ define "main" }}
<div class="page-container">
    <div class="container">
        <div class="page-header">
            <h1>{{ if .Title }}{{ .Title }}{{ else }}ÊñáÁ´†ÂàóË°®{{ end }}</h1>
            {{ if .Description }}
            <p class="page-description">{{ .Description }}</p>
            {{ end }}
        </div>

        <div class="blog-posts">
            {{ range .Paginator.Pages }}
            <article class="content-box">
                {{ if .Params.featured_image }}
                <div class="posts-default-img">
                    <a href="{{ .RelPermalink }}" title="{{ .Title }}">
                        <div class="overlay"></div>
                        <img src="{{ .Params.featured_image }}" alt="{{ .Title }}" loading="lazy">
                    </a>
                </div>
                {{ end }}

                <div class="posts-default-box">
                    <div class="posts-default-title">
                        {{ if .Params.tags }}
                        <div class="post-entry-categories">
                            {{ range .Params.tags }}
                            <a href="{{ "/tags/" | absURL }}{{ . | urlize }}" class="post-tag">{{ . }}</a>
                            {{ end }}
                        </div>
                        {{ end }}

                        <a href="{{ .RelPermalink }}" class="post-title">
                            {{ .Title }}
                        </a>
                    </div>

                    <div class="posts-default-content">
                        <div class="posts-text">
                            {{ if .Description }}
                                {{ .Description }}
                            {{ else if .Summary }}
                                {{ .Summary }}
                            {{ else }}
                                {{ .Content | plainify | truncate 150 }}
                            {{ end }}
                        </div>

                        <div class="posts-default-info">
                            <div class="left">
                                <div class="post-author">
                                    <img src="https://blog.cdn.thinkmoon.cn/%E5%81%B7%E6%98%9F%E4%B9%9D%E6%9C%88%E5%A4%E9%E5%A4%B4%E5%83%8F.jpeg"
                                         alt="ÈÜâÊúàÊÄù" width="16" height="16" style="border-radius:50%">
                                    <a href="https://www.thinkmoon.cn" target="_blank">ÈÜâÊúàÊÄù</a>
                                </div>

                                <div class="ico-warp">
                                    <span class="icon">üìÅ</span>
                                    <a href="{{ "/categories/" | absURL }}{{ (index (.Params.categories | default (slice "Êú™ÂàÜÁ±ª")) 0) | urlize }}">
                                        {{ index (.Params.categories | default (slice "Êú™ÂàÜÁ±ª")) 0 }}
                                    </a>
                                </div>

                                <div class="ico-warp">
                                    <span class="icon">üìÖ</span>
                                    <span>{{ .Date.Format "2006-01-02" }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </article>
                {{ end }}
            {{ end }}
        </div>

        {{ if .Paginator }}
        <div class="pagination-container">
            {{ if .Paginator.HasPrev }}
            <a href="{{ .Paginator.Prev.URL }}" class="pagination-link prev">‰∏ä‰∏ÄÈ°µ</a>
            {{ else }}
            <span class="pagination-link prev disabled">‰∏ä‰∏ÄÈ°µ</span>
            {{ end }}

            {{ $currentPage := .Paginator.PageNumber }}
            {{ $totalPages := .Paginator.TotalPages }}
            {{ $maxVisible := 5 }}
            {{ if le $totalPages $maxVisible }}
                {{ range $i := (seq 1 $totalPages) }}
                <a href="/page/page/{{ $i }}/" class="pagination-link {{ if eq $i $currentPage }}active{{ end }}">{{ $i }}</a>
                {{ end }}
            {{ else }}
                {{ if le $currentPage 3 }}
                    {{ range $i := (seq 1 4) }}
                    <a href="/page/page/{{ $i }}/" class="pagination-link {{ if eq $i $currentPage }}active{{ end }}">{{ $i }}</a>
                    {{ end }}
                    {{ if gt $totalPages 4 }}
                    <span class="pagination-link disabled">...</span>
                    <a href="/page/page/{{ $totalPages }}/" class="pagination-link">{{ $totalPages }}</a>
                    {{ end }}
                {{ else if ge $currentPage (sub $totalPages 2) }}
                    <a href="/page/" class="pagination-link">1</a>
                    <span class="pagination-link disabled">...</span>
                    {{ range $i := (seq (sub $totalPages 3) $totalPages) }}
                    <a href="/page/page/{{ $i }}/" class="pagination-link {{ if eq $i $currentPage }}active{{ end }}">{{ $i }}</a>
                    {{ end }}
                {{ else }}
                    <a href="/page/" class="pagination-link">1</a>
                    <span class="pagination-link disabled">...</span>
                    {{ range $i := (seq (sub $currentPage 1) (add $currentPage 1)) }}
                    <a href="/page/page/{{ $i }}/" class="pagination-link {{ if eq $i $currentPage }}active{{ end }}">{{ $i }}</a>
                    {{ end }}
                    <span class="pagination-link disabled">...</span>
                    <a href="/page/page/{{ $totalPages }}/" class="pagination-link">{{ $totalPages }}</a>
                {{ end }}
            {{ end }}

            {{ if .Paginator.HasNext }}
            <a href="{{ .Paginator.Next.URL }}" class="pagination-link next">‰∏ã‰∏ÄÈ°µ</a>
            {{ else }}
            <span class="pagination-link next disabled">‰∏ã‰∏ÄÈ°µ</span>
            {{ end }}
        </div>
        {{ end }}
    </div>
</div>