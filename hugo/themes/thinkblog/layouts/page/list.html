{{ define "main" }}
<div class="page-container">
    <div class="container">
        <div class="page-header">
            <h1>{{ if .Title }}{{ .Title }}{{ else }}æ–‡ç« åˆ—è¡¨{{ end }}</h1>
            {{ if .Description }}
            <p class="page-description">{{ .Description }}</p>
            {{ end }}
        </div>

        <div class="blog-posts">
            {{ $pages := .Site.RegularPages }}
            {{ $pageSize := 10 }}
            {{ $currentURL := .RelPermalink }}
            {{ $currentPage := 1 }}
            {{ if strings.Contains $currentURL "/page/" }}
                {{ $urlParts := split (strings.TrimSuffix (strings.TrimPrefix $currentURL "/page/") "/") "/" }}
                {{ if $urlParts }}
                    {{ $pageStr := index $urlParts 0 }}
                    {{ if $pageStr }}
                        {{ $currentPage = int $pageStr }}
                    {{ end }}
                {{ end }}
            {{ end }}
            {{ $offset := mul (sub $currentPage 1) $pageSize }}
            {{ range $index, $element := $pages }}
                {{ if and (ge $index $offset) (lt $index (add $offset $pageSize)) }}
            <article class="content-box">
                {{ if .Params.featured_image }}
                <div class="posts-default-img">
                    <a href="{{ .RelPermalink }}" title="{{ .Title }}">
                        <div class="overlay"></div>
                        <img src="{{ .Params.featured_image }}" alt="{{ .Title }}" loading="lazy">
                    </a>
                </div>
                {{ end }}

                <div class="posts-default-box">
                    <div class="posts-default-title">
                        {{ if .Params.tags }}
                        <div class="post-entry-categories">
                            {{ range .Params.tags }}
                            <a href="{{ "/tags/" | absURL }}{{ . | urlize }}" class="post-tag">{{ . }}</a>
                            {{ end }}
                        </div>
                        {{ end }}

                        <a href="{{ .RelPermalink }}" class="post-title">
                            {{ .Title }}
                        </a>
                    </div>

                    <div class="posts-default-content">
                        <div class="posts-text">
                            {{ if .Description }}
                                {{ .Description }}
                            {{ else if .Summary }}
                                {{ .Summary }}
                            {{ else }}
                                {{ .Content | plainify | truncate 150 }}
                            {{ end }}
                        </div>

                        <div class="posts-default-info">
                            <div class="left">
                                <div class="post-author">
                                    <img src="https://blog.cdn.thinkmoon.cn/%E5%81%B7%E6%98%9F%E4%B9%9D%E6%9C%88%E5%A4%E9%E5%A4%B4%E5%83%8F.jpeg"
                                         alt="é†‰æœˆæ€" width="16" height="16" style="border-radius:50%">
                                    <a href="https://www.thinkmoon.cn" target="_blank">é†‰æœˆæ€</a>
                                </div>

                                <div class="ico-warp">
                                    <span class="icon">ğŸ“</span>
                                    <a href="{{ "/categories/" | absURL }}{{ (index (.Params.categories | default (slice "æœªåˆ†ç±»")) 0) | urlize }}">
                                        {{ index (.Params.categories | default (slice "æœªåˆ†ç±»")) 0 }}
                                    </a>
                                </div>

                                <div class="ico-warp">
                                    <span class="icon">ğŸ“…</span>
                                    <span>{{ .Date.Format "2006-01-02" }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </article>
                {{ end }}
            {{ end }}
        </div>

        <div class="pagination-container">
            {{ $currentURL := .RelPermalink }}
            {{ $currentPage := 1 }}
            {{ if strings.Contains $currentURL "/page/" }}
                {{ $urlParts := split (strings.TrimSuffix (strings.TrimPrefix $currentURL "/page/") "/") "/" }}
                {{ if $urlParts }}
                    {{ $pageStr := index $urlParts 0 }}
                    {{ if $pageStr }}
                        {{ $currentPage = int $pageStr }}
                    {{ end }}
                {{ end }}
            {{ end }}

            {{ if gt $currentPage 1 }}
            <a href="/page/{{ sub $currentPage 1 }}/" class="pagination-link prev">ä¸Šä¸€é¡µ</a>
            {{ else }}
            <span class="pagination-link prev disabled">ä¸Šä¸€é¡µ</span>
            {{ end }}

            <a href="/page/1/" class="pagination-link {{ if eq $currentPage 1 }}active{{ end }}">1</a>
            <a href="/page/2/" class="pagination-link {{ if eq $currentPage 2 }}active{{ end }}">2</a>
            <a href="/page/3/" class="pagination-link {{ if eq $currentPage 3 }}active{{ end }}">3</a>

            {{ if lt $currentPage 16 }}
            <a href="/page/{{ add $currentPage 1 }}/" class="pagination-link next">ä¸‹ä¸€é¡µ</a>
            {{ else }}
            <span class="pagination-link next disabled">ä¸‹ä¸€é¡µ</span>
            {{ end }}
        </div>
    </div>
</div>
{{ end }}